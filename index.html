<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MBTI Love Advisor</title>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:wght@400;600;700;800&family=Cormorant+Garamond:wght@600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Merriweather Sans', 'Noto Sans JP', sans-serif;
      background: linear-gradient(160deg, #ff6b9d 0%, #c06c84 40%, #6c5b7b 70%, #355c7d 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 50px;
      animation: fadeIn 0.8s ease-out;
    }

    .heart-icon {
      display: inline-block;
      margin-bottom: 20px;
      animation: pulse 2s ease-in-out infinite;
    }

    .heart-icon svg {
      width: 50px;
      height: 50px;
      fill: #fff;
      filter: drop-shadow(0 4px 20px rgba(255, 107, 157, 0.5));
    }

    h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 56px;
      font-weight: 700;
      color: #fff;
      margin: 0 0 15px 0;
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      letter-spacing: 1px;
    }

    .subtitle {
      font-size: 18px;
      color: rgba(255, 255, 255, 0.9);
      font-weight: 600;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .form-container, .result-container {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      border-radius: 30px;
      padding: 50px;
      box-shadow: 0 30px 90px rgba(0, 0, 0, 0.25);
      animation: fadeIn 0.8s ease-out 0.2s both;
    }

    .form-group {
      margin-bottom: 35px;
    }

    label {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 18px;
      font-weight: 700;
      color: #c06c84;
      margin-bottom: 15px;
    }

    label svg {
      width: 22px;
      height: 22px;
      stroke: #c06c84;
    }

    select, textarea {
      width: 100%;
      padding: 18px 20px;
      font-size: 16px;
      font-weight: 600;
      color: #333;
      border: 3px solid #ffd1dc;
      border-radius: 15px;
      background-color: #fff;
      font-family: inherit;
      transition: all 0.3s ease;
    }

    select {
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23ff6b9d' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 15px center;
      background-size: 20px;
      padding-right: 45px;
    }

    textarea {
      resize: vertical;
      line-height: 1.6;
      min-height: 100px;
    }

    select:focus, textarea:focus {
      outline: none;
      border-color: #ff6b9d;
      box-shadow: 0 0 0 4px rgba(255, 107, 157, 0.1);
    }

    .error {
      background: #ffe6e6;
      border: 2px solid #ff6b6b;
      border-radius: 12px;
      padding: 15px 20px;
      margin-bottom: 30px;
      color: #d63031;
      font-size: 14px;
      font-weight: 600;
    }

    .btn {
      width: 100%;
      background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
      color: #fff;
      border: none;
      padding: 20px;
      font-size: 18px;
      font-weight: 700;
      border-radius: 15px;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(255, 107, 157, 0.4);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-family: inherit;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 40px rgba(255, 107, 157, 0.5);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.98);
      color: #c06c84;
      border: 3px solid rgba(255, 255, 255, 0.5);
      padding: 16px 50px;
      font-size: 16px;
      border-radius: 50px;
      width: auto;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .btn-secondary:hover {
      background: #fff;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
    }

    .result-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid #ffd1dc;
    }

    .result-icon {
      background: linear-gradient(135deg, #ff6b9d, #c06c84);
      border-radius: 50%;
      padding: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .result-icon svg {
      width: 28px;
      height: 28px;
      stroke: #fff;
    }

    .result-title h2 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 32px;
      font-weight: 700;
      color: #c06c84;
      margin: 0;
    }

    .result-title p {
      font-size: 14px;
      color: #999;
      margin: 5px 0 0 0;
      font-weight: 600;
    }

    .advice-content {
      font-size: 16px;
      line-height: 1.9;
      color: #333;
      background: linear-gradient(135deg, rgba(255, 107, 157, 0.05), rgba(192, 108, 132, 0.05));
      padding: 30px;
      border-radius: 20px;
      border: 2px solid rgba(255, 107, 157, 0.15);
      margin-bottom: 25px;
    }

    .advice-section {
      margin-bottom: 20px;
    }

    .advice-section:last-child {
      margin-bottom: 0;
    }

    .advice-section h3 {
      font-size: 18px;
      font-weight: 700;
      color: #ff6b9d;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .advice-section p {
      margin-bottom: 10px;
      line-height: 1.8;
    }

    .reset-container {
      text-align: center;
      margin-top: 30px;
    }

    .hidden {
      display: none;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @media (max-width: 768px) {
      body {
        padding: 20px 15px;
      }
      h1 {
        font-size: 36px;
      }
      .form-container, .result-container {
        padding: 30px 25px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="heart-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
      </div>
      <h1>MBTI Love Advisor</h1>
      <p class="subtitle">ã‚ãªãŸã®æ‹æ„›ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™</p>
    </div>

    <div id="formView" class="form-container">
      <div class="form-group">
        <label>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
          </svg>
          ã‚ãªãŸã®MBTIã‚¿ã‚¤ãƒ— *
        </label>
        <select id="myType">
          <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
          <option value="INTJ">INTJ - æˆ¦ç•¥å®¶</option>
          <option value="INTP">INTP - è«–ç†å­¦è€…</option>
          <option value="ENTJ">ENTJ - æŒ‡æ®å®˜</option>
          <option value="ENTP">ENTP - è¨è«–è€…</option>
          <option value="INFJ">INFJ - æå”±è€…</option>
          <option value="INFP">INFP - ä»²ä»‹è€…</option>
          <option value="ENFJ">ENFJ - ä¸»äººå…¬</option>
          <option value="ENFP">ENFP - åºƒå ±é‹å‹•å®¶</option>
          <option value="ISTJ">ISTJ - ç®¡ç†è€…</option>
          <option value="ISFJ">ISFJ - æ“è­·è€…</option>
          <option value="ESTJ">ESTJ - å¹¹éƒ¨</option>
          <option value="ESFJ">ESFJ - é ˜äº‹å®˜</option>
          <option value="ISTP">ISTP - å·¨åŒ </option>
          <option value="ISFP">ISFP - å†’é™ºå®¶</option>
          <option value="ESTP">ESTP - èµ·æ¥­å®¶</option>
          <option value="ESFP">ESFP - ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒŠãƒ¼</option>
        </select>
      </div>

      <div class="form-group">
        <label>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
          </svg>
          ç›¸æ‰‹ã®MBTIã‚¿ã‚¤ãƒ—ï¼ˆã‚ã‹ã‚Œã°ï¼‰
        </label>
        <select id="partnerType">
          <option value="">ä¸æ˜ / é¸æŠã—ãªã„</option>
          <option value="INTJ">INTJ - æˆ¦ç•¥å®¶</option>
          <option value="INTP">INTP - è«–ç†å­¦è€…</option>
          <option value="ENTJ">ENTJ - æŒ‡æ®å®˜</option>
          <option value="ENTP">ENTP - è¨è«–è€…</option>
          <option value="INFJ">INFJ - æå”±è€…</option>
          <option value="INFP">INFP - ä»²ä»‹è€…</option>
          <option value="ENFJ">ENFJ - ä¸»äººå…¬</option>
          <option value="ENFP">ENFP - åºƒå ±é‹å‹•å®¶</option>
          <option value="ISTJ">ISTJ - ç®¡ç†è€…</option>
          <option value="ISFJ">ISFJ - æ“è­·è€…</option>
          <option value="ESTJ">ESTJ - å¹¹éƒ¨</option>
          <option value="ESFJ">ESFJ - é ˜äº‹å®˜</option>
          <option value="ISTP">ISTP - å·¨åŒ </option>
          <option value="ISFP">ISFP - å†’é™ºå®¶</option>
          <option value="ESTP">ESTP - èµ·æ¥­å®¶</option>
          <option value="ESFP">ESFP - ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒŠãƒ¼</option>
        </select>
      </div>

      <div class="form-group">
        <label>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg>
          æ‚©ã¿ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ *
        </label>
        <select id="concernCategory">
          <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
          <option value="communication">ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå–ã‚Šã¥ã‚‰ã„</option>
          <option value="values">ä¾¡å€¤è¦³ã®é•ã„ã‚’æ„Ÿã˜ã‚‹</option>
          <option value="distance">è·é›¢æ„ŸãŒã‚ã‹ã‚‰ãªã„</option>
          <option value="future">å°†æ¥ã«ã¤ã„ã¦ä¸å®‰</option>
          <option value="feelings">ç›¸æ‰‹ã®æ°—æŒã¡ãŒèª­ã‚ãªã„</option>
          <option value="conflict">å–§å˜©ãŒå¤šã„ãƒ»å¯¾ç«‹ã—ãŒã¡</option>
          <option value="frequency">é€£çµ¡ã®é »åº¦ãŒåˆã‚ãªã„</option>
          <option value="expression">æ„›æƒ…è¡¨ç¾ãŒè¶³ã‚Šãªã„æ°—ãŒã™ã‚‹</option>
        </select>
      </div>

      <div class="form-group">
        <label>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
          </svg>
          å…·ä½“çš„ãªçŠ¶æ³ï¼ˆä»»æ„ï¼‰
        </label>
        <textarea id="concernDetail" placeholder="ä¾‹ï¼šæœ€è¿‘LINEã®è¿”ä¿¡ãŒé…ããªã£ã¦ãã¦ã€å†·ãŸãæ„Ÿã˜ã¾ã™..."></textarea>
      </div>

      <div id="errorMessage" class="error hidden"></div>

      <button id="submitBtn" class="btn">
        <span>ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ã‚‚ã‚‰ã†</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </button>
    </div>

    <div id="resultView" class="hidden">
      <div class="result-container">
        <div class="result-header">
          <div class="result-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
            </svg>
          </div>
          <div class="result-title">
            <h2>ã‚ãªãŸã¸ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹</h2>
            <p id="typesLabel"></p>
          </div>
        </div>
        <div id="adviceContent" class="advice-content"></div>
      </div>
      <div class="reset-container">
        <button id="resetBtn" class="btn btn-secondary">ã‚‚ã†ä¸€åº¦ç›¸è«‡ã™ã‚‹</button>
      </div>
    </div>
  </div>

  <script>
    const adviceDatabase = {
      // å„ã‚¿ã‚¤ãƒ—ã®åŸºæœ¬çš„ãªæ‹æ„›å‚¾å‘
      typeCharacteristics: {
        INTJ: {
          traits: 'è«–ç†çš„ã§è¨ˆç”»çš„ã€æ·±ã„ç²¾ç¥çš„ç¹‹ãŒã‚Šã‚’é‡è¦–',
          communication: 'ç›´æ¥çš„ã§ç‡ç›´ã€æ„Ÿæƒ…è¡¨ç¾ã¯æ§ãˆã‚',
          needsSpace: true
        },
        INTP: {
          traits: 'çŸ¥çš„å¥½å¥‡å¿ƒãŒå¼·ãã€ç‹¬ç«‹å¿ƒãŒé«˜ã„',
          communication: 'è«–ç†çš„ãªè­°è«–ã‚’å¥½ã¿ã€æ„Ÿæƒ…è¡¨ç¾ãŒè‹¦æ‰‹',
          needsSpace: true
        },
        ENTJ: {
          traits: 'ç›®æ¨™å¿—å‘ã§æ±ºæ–­åŠ›ãŒã‚ã‚‹ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ç™ºæ®',
          communication: 'ç‡ç›´ã§åŠ¹ç‡çš„ã€æ™‚ã«æ”¯é…çš„ã«ãªã‚ŠãŒã¡',
          needsSpace: false
        },
        ENTP: {
          traits: 'å‰µé€ çš„ã§è­°è«–å¥½ãã€spontaneousãªæ€§æ ¼',
          communication: 'çŸ¥çš„ãªåˆºæ¿€ã‚’æ±‚ã‚ã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚’å«Œã†',
          needsSpace: false
        },
        INFJ: {
          traits: 'ç†æƒ³ä¸»ç¾©çš„ã§å…±æ„ŸåŠ›ãŒé«˜ã„ã€æ·±ã„çµ†ã‚’æ±‚ã‚ã‚‹',
          communication: 'ç›´æ„Ÿçš„ã§æ´å¯ŸåŠ›ãŒã‚ã‚Šã€çŒ®èº«çš„',
          needsSpace: true
        },
        INFP: {
          traits: 'ç´”ç²‹ã§æƒ…ç†±çš„ã€ç†æƒ³ã®æ„›ã‚’è¿½æ±‚',
          communication: 'ç¹Šç´°ã§è©©çš„ã€è¡çªã‚’é¿ã‘ã‚‹å‚¾å‘',
          needsSpace: true
        },
        ENFJ: {
          traits: 'ã‚«ãƒªã‚¹ãƒçš„ã§æ€ã„ã‚„ã‚ŠãŒã‚ã‚‹ã€èª¿å’Œã‚’é‡è¦–',
          communication: 'è¡¨ç¾è±Šã‹ã§çŒ®èº«çš„ã€ç›¸æ‰‹ã®æˆé•·ã‚’ã‚µãƒãƒ¼ãƒˆ',
          needsSpace: false
        },
        ENFP: {
          traits: 'æƒ…ç†±çš„ã§å†’é™ºå¥½ãã€è‡ªç”±ã‚’æ„›ã™ã‚‹',
          communication: 'å‰µé€ çš„ã§æ¥½è¦³çš„ã€æ·±ã„æ„Ÿæƒ…ã‚’æŒã¤',
          needsSpace: false
        },
        ISTJ: {
          traits: 'èª å®Ÿã§è²¬ä»»æ„ŸãŒå¼·ã„ã€ä¼çµ±ã‚’é‡è¦–',
          communication: 'å®Ÿè·µçš„ã§ä¿¡é ¼ã§ãã‚‹ã€è¨€è‘‰ã‚ˆã‚Šè¡Œå‹•',
          needsSpace: true
        },
        ISFJ: {
          traits: 'çŒ®èº«çš„ã§æ€ã„ã‚„ã‚Šæ·±ã„ã€å®‰å®šã‚’æ±‚ã‚ã‚‹',
          communication: 'ç´°ã‚„ã‹ãªæ°—é…ã‚ŠãŒã§ãã‚‹ã€è‡ªå·±çŠ ç‰²çš„',
          needsSpace: true
        },
        ESTJ: {
          traits: 'çµ„ç¹”çš„ã§å®Ÿç›´ã€ç§©åºã‚’é‡è¦–',
          communication: 'ç›´æ¥çš„ã§èª å®Ÿã€æ™‚ã«æŸ”è»Ÿæ€§ã«æ¬ ã‘ã‚‹',
          needsSpace: false
        },
        ESFJ: {
          traits: 'ç¤¾äº¤çš„ã§ä¸–è©±å¥½ãã€èª¿å’Œã‚’å¤§åˆ‡ã«ã™ã‚‹',
          communication: 'è¡¨ç¾è±Šã‹ã§æ€ã„ã‚„ã‚ŠãŒã‚ã‚‹ã€æ‰¿èªã‚’æ±‚ã‚ã‚‹',
          needsSpace: false
        },
        ISTP: {
          traits: 'ç‹¬ç«‹å¿ƒãŒå¼·ãå®Ÿè·µçš„ã€è‡ªç”±ã‚’é‡è¦–',
          communication: 'ã‚¯ãƒ¼ãƒ«ã§å†·é™ã€è¨€è‘‰ã‚ˆã‚Šè¡Œå‹•ã§ç¤ºã™',
          needsSpace: true
        },
        ISFP: {
          traits: 'ç¹Šç´°ã§å‰µé€ çš„ã€ç¾çš„ã‚»ãƒ³ã‚¹ãŒã‚ã‚‹',
          communication: 'é™ã‹ã§å„ªã—ã„ã€è¡çªã‚’é¿ã‘ã‚‹',
          needsSpace: true
        },
        ESTP: {
          traits: 'ã‚¨ãƒãƒ«ã‚®ãƒƒã‚·ãƒ¥ã§å¤§èƒ†ã€ä»Šã‚’æ¥½ã—ã‚€',
          communication: 'ç›´æ¥çš„ã§è¡Œå‹•çš„ã€spontaneous',
          needsSpace: false
        },
        ESFP: {
          traits: 'æ˜ã‚‹ãç¤¾äº¤çš„ã€äººç”Ÿã‚’æ¥½ã—ã‚€',
          communication: 'æƒ…ç†±çš„ã§æ¥½è¦³çš„ã€æ³¨ç›®ã‚’æ±‚ã‚ã‚‹',
          needsSpace: false
        }
      },

      // å„æ‚©ã¿ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«å¯¾ã™ã‚‹ä¸€èˆ¬çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹
      concernAdvice: {
        communication: {
          title: 'ğŸ’¬ ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ”¹å–„',
          general: 'ãŠäº’ã„ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã®é•ã„ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒç¬¬ä¸€æ­©ã§ã™ã€‚',
          tips: [
            'ç›¸æ‰‹ã®è©±ã‚’æœ€å¾Œã¾ã§èãã€ç†è§£ã—ã‚ˆã†ã¨ã™ã‚‹å§¿å‹¢ã‚’è¦‹ã›ã‚‹',
            'è‡ªåˆ†ã®æ°—æŒã¡ã‚’ã€Œç§ã¯ã€œã€ã¨ã„ã†ä¸»èªã§ä¼ãˆã‚‹ï¼ˆIãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰',
            'å®šæœŸçš„ã«äºŒäººã ã‘ã®æ™‚é–“ã‚’ä½œã‚Šã€ã˜ã£ãã‚Šè©±ã™æ©Ÿä¼šã‚’è¨­ã‘ã‚‹'
          ]
        },
        values: {
          title: 'ğŸ¯ ä¾¡å€¤è¦³ã®é•ã„ã¸ã®å¯¾å‡¦',
          general: 'ä¾¡å€¤è¦³ã®é•ã„ã¯æˆé•·ã®æ©Ÿä¼šã§ã™ã€‚å®Œå…¨ã«åŒã˜ã§ã‚ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚',
          tips: [
            'ãŠäº’ã„ã®ä¾¡å€¤è¦³ã‚’å°Šé‡ã—ã€é•ã„ã‚’èªã‚åˆã†',
            'å¦¥å”ã§ãã‚‹éƒ¨åˆ†ã¨è­²ã‚Œãªã„éƒ¨åˆ†ã‚’æ˜ç¢ºã«ã™ã‚‹',
            'å…±é€šã®ç›®æ¨™ã‚„ä¾¡å€¤è¦³ã‚’è¦‹ã¤ã‘ã€ãã“ã«ç„¦ç‚¹ã‚’å½“ã¦ã‚‹'
          ]
        },
        distance: {
          title: 'ğŸ“ é©åˆ‡ãªè·é›¢æ„Ÿã®æ§‹ç¯‰',
          general: 'å¿ƒåœ°ã‚ˆã„è·é›¢æ„Ÿã¯äººãã‚Œãã‚Œã€‚ãŠäº’ã„ã®ãƒšãƒ¼ã‚¹ã‚’å°Šé‡ã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚',
          tips: [
            'ç›¸æ‰‹ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚¹ãƒšãƒ¼ã‚¹ã®å¿…è¦æ€§ã‚’ç†è§£ã™ã‚‹',
            'ä¸€ç·’ã«ã„ã‚‹æ™‚é–“ã¨ä¸€äººã®æ™‚é–“ã®ãƒãƒ©ãƒ³ã‚¹ã‚’è©±ã—åˆã†',
            'è·é›¢ãŒã‚ã‚‹ã“ã¨ã¯æ„›æƒ…ãŒãªã„ã“ã¨ã§ã¯ãªã„ã¨ç†è§£ã™ã‚‹'
          ]
        },
        future: {
          title: 'ğŸ”® å°†æ¥ã¸ã®ä¸å®‰ã®è§£æ¶ˆ',
          general: 'å°†æ¥ã«ã¤ã„ã¦ç‡ç›´ã«è©±ã—åˆã„ã€ãŠäº’ã„ã®ãƒ“ã‚¸ãƒ§ãƒ³ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚',
          tips: [
            'å…·ä½“çš„ãªå°†æ¥åƒã«ã¤ã„ã¦å®šæœŸçš„ã«è©±ã—åˆã†',
            'çŸ­æœŸçš„ãƒ»é•·æœŸçš„ãªç›®æ¨™ã‚’ä¸€ç·’ã«è¨­å®šã™ã‚‹',
            'ä¸å®‰ãªæ°—æŒã¡ã‚’æ­£ç›´ã«ä¼ãˆã€ã‚µãƒãƒ¼ãƒˆã—åˆã†'
          ]
        },
        feelings: {
          title: 'ğŸ’­ ç›¸æ‰‹ã®æ°—æŒã¡ã®ç†è§£',
          general: 'ç›¸æ‰‹ã®æ°—æŒã¡ã¯æƒ³åƒã ã‘ã§åˆ¤æ–­ã›ãšã€ç›´æ¥ç¢ºèªã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚',
          tips: [
            'ã€Œã€œã ã¨æ€ã†ã€ã§ã¯ãªãã€Œã©ã†æ€ã£ã¦ã„ã‚‹ã®ï¼Ÿã€ã¨èã',
            'ç›¸æ‰‹ã®è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„æ„›æƒ…è¡¨ç¾ã®ä»•æ–¹ã‚’ç†è§£ã™ã‚‹',
            'éè¨€èªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆè¡¨æƒ…ã€æ…‹åº¦ï¼‰ã«ã‚‚æ³¨æ„ã‚’æ‰•ã†'
          ]
        },
        conflict: {
          title: 'âš¡ å–§å˜©ãƒ»å¯¾ç«‹ã®è§£æ±º',
          general: 'å¯¾ç«‹ã¯æ‚ªã„ã“ã¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å»ºè¨­çš„ã«è§£æ±ºã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚',
          tips: [
            'å†·å´æ™‚é–“ã‚’å–ã‚Šã€æ„Ÿæƒ…çš„ã«ãªã£ã¦ã„ã‚‹æ™‚ã¯è·é›¢ã‚’ç½®ã',
            'ç›¸æ‰‹ã‚’è²¬ã‚ã‚‹ã®ã§ã¯ãªãã€å•é¡Œè§£æ±ºã«ç„¦ç‚¹ã‚’å½“ã¦ã‚‹',
            'å–§å˜©å¾Œã¯å¿…ãšè©±ã—åˆã„ã€ãŠäº’ã„ã®æ°—æŒã¡ã‚’ç¢ºèªã™ã‚‹'
          ]
        },
        frequency: {
          title: 'ğŸ“± é€£çµ¡é »åº¦ã®èª¿æ•´',
          general: 'é€£çµ¡ã®é »åº¦ã¯äººã«ã‚ˆã£ã¦å¤§ããç•°ãªã‚Šã¾ã™ã€‚ãŠäº’ã„ã®æœŸå¾…å€¤ã‚’èª¿æ•´ã—ã¾ã—ã‚‡ã†ã€‚',
          tips: [
            'ãã‚Œãã‚Œã®ç†æƒ³çš„ãªé€£çµ¡é »åº¦ã‚’ç‡ç›´ã«ä¼ãˆåˆã†',
            'å¿™ã—ã„æ™‚æœŸã¯äº‹å‰ã«ä¼ãˆã¦ãŠã',
            'é€£çµ¡ã®é‡ã‚ˆã‚Šè³ªã‚’é‡è¦–ã™ã‚‹'
          ]
        },
        expression: {
          title: 'ğŸ’– æ„›æƒ…è¡¨ç¾ã®é•ã„',
          general: 'æ„›æƒ…è¡¨ç¾ã®æ–¹æ³•ã¯äººãã‚Œãã‚Œã€‚ç›¸æ‰‹ã®æ„›æƒ…è¨€èªã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒéµã§ã™ã€‚',
          tips: [
            '5ã¤ã®æ„›æƒ…è¨€èªï¼ˆè¨€è‘‰ã€è¡Œå‹•ã€ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã€æ™‚é–“ã€ã‚¹ã‚­ãƒ³ã‚·ãƒƒãƒ—ï¼‰ã‚’å­¦ã¶',
            'ç›¸æ‰‹ãŒã©ã®è¡¨ç¾ã§æ„›ã‚’æ„Ÿã˜ã‚‹ã‹è¦³å¯Ÿã—ã€ç¢ºèªã™ã‚‹',
            'è‡ªåˆ†ã®æ„›æƒ…è¡¨ç¾ã®ä»•æ–¹ã‚‚ç›¸æ‰‹ã«ä¼ãˆã‚‹'
          ]
        }
      }
    };

    const formView = document.getElementById('formView');
    const resultView = document.getElementById('resultView');
    const myTypeSelect = document.getElementById('myType');
    const partnerTypeSelect = document.getElementById('partnerType');
    const concernCategorySelect = document.getElementById('concernCategory');
    const concernDetailTextarea = document.getElementById('concernDetail');
    const submitBtn = document.getElementById('submitBtn');
    const resetBtn = document.getElementById('resetBtn');
    const errorMessage = document.getElementById('errorMessage');
    const adviceContent = document.getElementById('adviceContent');
    const typesLabel = document.getElementById('typesLabel');

    submitBtn.addEventListener('click', generateAdvice);
    resetBtn.addEventListener('click', reset);

    function generateAdvice() {
      const myType = myTypeSelect.value;
      const partnerType = partnerTypeSelect.value;
      const concernCategory = concernCategorySelect.value;
      const concernDetail = concernDetailTextarea.value.trim();

      if (!myType || !concernCategory) {
        showError('MBTIã‚¿ã‚¤ãƒ—ã¨æ‚©ã¿ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„');
        return;
      }

      hideError();

      const advice = buildAdvice(myType, partnerType, concernCategory, concernDetail);
      showResult(myType, partnerType, advice);
    }

    function buildAdvice(myType, partnerType, concernCategory, concernDetail) {
      const myTraits = adviceDatabase.typeCharacteristics[myType];
      const partnerTraits = partnerType ? adviceDatabase.typeCharacteristics[partnerType] : null;
      const concernInfo = adviceDatabase.concernAdvice[concernCategory];

      let sections = [];

      // ç›¸æ€§åˆ†æã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆç›¸æ‰‹ã®ã‚¿ã‚¤ãƒ—ãŒã‚ã‹ã‚‹å ´åˆï¼‰
      if (partnerTraits) {
        const compatibility = analyzeCompatibility(myType, partnerType, myTraits, partnerTraits);
        sections.push({
          title: 'ğŸ’• ç›¸æ€§åˆ†æ',
          content: compatibility
        });
      }

      // ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ã®ç‰¹å¾´
      sections.push({
        title: `âœ¨ ${myType}ã‚¿ã‚¤ãƒ—ã®æ‹æ„›å‚¾å‘`,
        content: `${myTraits.traits}ã€‚ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯${myTraits.communication}ã¨ã„ã†ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚`
      });

      // æ‚©ã¿ã«å¯¾ã™ã‚‹ã‚¢ãƒ‰ãƒã‚¤ã‚¹
      sections.push({
        title: concernInfo.title,
        content: concernInfo.general,
        tips: concernInfo.tips
      });

      // å…·ä½“çš„ãªå®Ÿè·µã‚¢ãƒ‰ãƒã‚¤ã‚¹
      const practicalAdvice = generatePracticalAdvice(myType, partnerType, concernCategory, myTraits, partnerTraits);
      sections.push({
        title: 'ğŸ¯ å…·ä½“çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³',
        content: practicalAdvice
      });

      return sections;
    }

    function analyzeCompatibility(myType, partnerType, myTraits, partnerTraits) {
      const myDimensions = {
        EI: myType[0],
        SN: myType[1],
        TF: myType[2],
        JP: myType[3]
      };
      const partnerDimensions = {
        EI: partnerType[0],
        SN: partnerType[1],
        TF: partnerType[2],
        JP: partnerType[3]
      };

      let compatibility = '';

      // E/I ã®çµ„ã¿åˆã‚ã›
      if (myDimensions.EI !== partnerDimensions.EI) {
        compatibility += 'å†…å‘å‹ã¨å¤–å‘å‹ã®çµ„ã¿åˆã‚ã›ã¯ã€ãŠäº’ã„ã«æ–°ã—ã„è¦–ç‚¹ã‚’ä¸ãˆåˆãˆã‚‹é–¢ä¿‚ã§ã™ã€‚';
      } else if (myDimensions.EI === 'I') {
        compatibility += 'ä¸¡è€…ã¨ã‚‚å†…å‘å‹ã®ãŸã‚ã€é™ã‹ã§æ·±ã„é–¢ä¿‚ã‚’ç¯‰ã‘ã¾ã™ãŒã€æ™‚ã«ã¯å¤–ã®ä¸–ç•Œã«ä¸€ç·’ã«å‡ºã‚‹ã“ã¨ã‚‚å¤§åˆ‡ã§ã™ã€‚';
      } else {
        compatibility += 'ä¸¡è€…ã¨ã‚‚å¤–å‘å‹ã§ã€ç¤¾äº¤çš„ã§æ´»ç™ºãªé–¢ä¿‚ã‚’æ¥½ã—ã‚ã¾ã™ãŒã€äºŒäººã ã‘ã®é™ã‹ãªæ™‚é–“ã‚‚æ„è­˜çš„ã«ä½œã‚Šã¾ã—ã‚‡ã†ã€‚';
      }

      // T/F ã®çµ„ã¿åˆã‚ã›
      if (myDimensions.TF !== partnerDimensions.TF) {
        compatibility += 'æ€è€ƒå‹ã¨æ„Ÿæƒ…å‹ã®çµ„ã¿åˆã‚ã›ã¯ã€è«–ç†ã¨æ„Ÿæƒ…ã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¾ã™ãŒã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã®é•ã„ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚';
      }

      return compatibility;
    }

    function generatePracticalAdvice(myType, partnerType, concernCategory, myTraits, partnerTraits) {
      let advice = '';

      // ã‚¿ã‚¤ãƒ—ã¨æ‚©ã¿ã«å¿œã˜ãŸå…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹
      switch (concernCategory) {
        case 'communication':
          if (myTraits.needsSpace) {
            advice = 'ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ã¯ä¸€äººã®æ™‚é–“ã‚’å¿…è¦ã¨ã—ã¾ã™ã€‚ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ãã®ã“ã¨ã‚’ä¸å¯§ã«èª¬æ˜ã—ã€ã€Œè·é›¢ã‚’ç½®ãã“ã¨ï¼æ„›æƒ…ãŒãªã„ã“ã¨ã€ã§ã¯ãªã„ã¨ç†è§£ã—ã¦ã‚‚ã‚‰ã„ã¾ã—ã‚‡ã†ã€‚';
          } else {
            advice = 'ã‚ãªãŸã¯ç¤¾äº¤çš„ãªã‚¿ã‚¤ãƒ—ã§ã™ã€‚ç›¸æ‰‹ãŒé™ã‹ãªæ™‚é–“ã‚’å¿…è¦ã¨ã™ã‚‹å ´åˆã€ãã‚Œã‚’å°Šé‡ã—ã¤ã¤ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è³ªã‚’é«˜ã‚ã‚‹ã“ã¨ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã¿ã¦ãã ã•ã„ã€‚';
          }
          if (partnerType && partnerTraits.needsSpace !== myTraits.needsSpace) {
            advice += 'ãŠäº’ã„ã®ãƒšãƒ¼ã‚¹ãŒç•°ãªã‚‹ãŸã‚ã€ã€Œä¸€ç·’ã«ã„ã‚‹æ™‚é–“ã€ã¨ã€Œä¸€äººã®æ™‚é–“ã€ã®ãƒãƒ©ãƒ³ã‚¹ã«ã¤ã„ã¦è©±ã—åˆã†ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚';
          }
          break;

        case 'distance':
          advice = myTraits.needsSpace 
            ? 'ä¸€äººã®æ™‚é–“ãŒå¿…è¦ãªã‚¿ã‚¤ãƒ—ã§ã™ã€‚ãã®æ™‚é–“ã¯è‡ªåˆ†ã‚’å……é›»ã—ã€ã‚ˆã‚Šè‰¯ã„ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã§ã„ã‚‹ãŸã‚ã«å¿…è¦ã ã¨ä¼ãˆã¾ã—ã‚‡ã†ã€‚'
            : 'ä¸€ç·’ã®æ™‚é–“ã‚’æ¥½ã—ã‚€ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ç›¸æ‰‹ãŒä¸€äººã®æ™‚é–“ã‚’å¿…è¦ã¨ã™ã‚‹å ´åˆã€ãã‚Œã‚’å°Šé‡ã—ã€ãã®é–“ã«è‡ªåˆ†ã®è¶£å‘³ã‚„å‹äººã¨ã®æ™‚é–“ã‚’æ¥½ã—ã¿ã¾ã—ã‚‡ã†ã€‚';
          break;

        case 'expression':
          if (myType.includes('T')) {
            advice = 'æ€è€ƒå‹ã®ã‚ãªãŸã¯ã€æ„›æƒ…ã‚’è¨€è‘‰ã‚ˆã‚Šã‚‚è¡Œå‹•ã§ç¤ºã™å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚æ™‚ã«ã¯ã€Œå¥½ãã€ã€Œå¤§åˆ‡ã«æ€ã£ã¦ã„ã‚‹ã€ã¨ç›´æ¥è¨€è‘‰ã§ä¼ãˆã‚‹ã“ã¨ã‚‚è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚';
          } else {
            advice = 'æ„Ÿæƒ…å‹ã®ã‚ãªãŸã¯ã€æ„›æƒ…ã‚’è¨€è‘‰ã§è¡¨ç¾ã™ã‚‹ã“ã¨ãŒå¾—æ„ã§ã™ã€‚ãŸã ã—ç›¸æ‰‹ãŒæ€è€ƒå‹ã®å ´åˆã€è¨€è‘‰ã‚ˆã‚Šã‚‚è¡Œå‹•ã‚„å®Ÿè·µçš„ãªã‚µãƒãƒ¼ãƒˆã‚’æ„›æƒ…ã¨æ„Ÿã˜ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚';
          }
          break;

        case 'frequency':
          advice = 'é€£çµ¡é »åº¦ã¯å€‹äººå·®ãŒå¤§ãã„å•é¡Œã§ã™ã€‚ã€Œæ¯æ—¥é€£çµ¡ã—ãŸã„ã€ã€Œé€±ã«æ•°å›ã§ååˆ†ã€ãªã©ã€ãŠäº’ã„ã®ç†æƒ³ã‚’æ•°å€¤åŒ–ã—ã¦å…±æœ‰ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚';
          break;

        default:
          advice = 'ãŠäº’ã„ã®ã‚¿ã‚¤ãƒ—ã®ç‰¹å¾´ã‚’ç†è§£ã—ã€é•ã„ã‚’å—ã‘å…¥ã‚Œã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã€‚å®Œç’§ãªé–¢ä¿‚ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ç†è§£ã—åˆã†åŠªåŠ›ãŒå¤§åˆ‡ã§ã™ã€‚';
      }

      return advice;
    }

    function showResult(myType, partnerType, adviceSections) {
      typesLabel.textContent = partnerType ? `${myType} Ã— ${partnerType}` : myType;
      
      adviceContent.innerHTML = '';
      
      adviceSections.forEach(section => {
        const sectionDiv = document.createElement('div');
        sectionDiv.className = 'advice-section';
        
        const title = document.createElement('h3');
        title.textContent = section.title;
        sectionDiv.appendChild(title);
        
        const content = document.createElement('p');
        content.textContent = section.content;
        sectionDiv.appendChild(content);
        
        if (section.tips) {
          const ul = document.createElement('ul');
          ul.style.marginLeft = '20px';
          ul.style.marginTop = '10px';
          section.tips.forEach(tip => {
            const li = document.createElement('li');
            li.textContent = tip;
            li.style.marginBottom = '8px';
            ul.appendChild(li);
          });
          sectionDiv.appendChild(ul);
        }
        
        adviceContent.appendChild(sectionDiv);
      });
      
      formView.classList.add('hidden');
      resultView.classList.remove('hidden');
    }

    function reset() {
      myTypeSelect.value = '';
      partnerTypeSelect.value = '';
      concernCategorySelect.value = '';
      concernDetailTextarea.value = '';
      hideError();
      resultView.classList.add('hidden');
      formView.classList.remove('hidden');
    }

    function showError(message) {
      errorMessage.textContent = message;
      errorMessage.classList.remove('hidden');
    }

    function hideError() {
      errorMessage.classList.add('hidden');
    }
  </script>
</body>
</html>